---
description: UIスタイルの要件定義
---
# UIスタイル

md-openのプレビュー画面をダーク/ライトテーマで表示し、切り替え可能にする機能。
背景色、テキスト色、シンタックスハイライト、mermaidダイアグラムをすべて選択テーマに統一する。
テーマ設定はCookieに永続化し、初回はシステム設定に追従する。

関連: [design](design.md)

## EARS記法パターン

| パターン | 構文 | 用途 |
|---------|------|------|
| Event-Driven | When [イベント], the [システム] shall [アクション] | イベント発生時の動作 |
| State-Driven | While [状態], the [システム] shall [アクション] | 特定状態中の動作 |
| Unwanted | If [トリガー], the [システム] shall [アクション] | 異常系・エラー処理 |
| Optional | Where [機能], the [システム] shall [アクション] | オプション機能 |
| Ubiquitous | The [システム] shall [アクション] | 常に適用される動作 |

## 1. ダークテーマ配色

**目的**: ユーザーとして、ダークテーマでマークダウンをプレビューしたい。それにより、目に優しく視認性の高いプレビューが得られる。

### 受け入れ基準

1.1 While ダークテーマが選択されている間, the システムはページ全体の背景色を `#0d1117`（GitHub Dark）で表示するものとする

1.2 While ダークテーマが選択されている間, the システムは本文テキスト色を `#e6edf3` で表示するものとする

1.3 While ダークテーマが選択されている間, the システムはコードブロックの背景色を `#161b22` で表示するものとする

1.4 While ダークテーマが選択されている間, the システムはボーダー色を `#30363d` で表示するものとする

1.5 While ダークテーマが選択されている間, the システムはbody要素に `data-theme="dark"` 属性を設定するものとする

## 2. フォント設定

**目的**: ユーザーとして、一貫性のあるフォントでマークダウンをプレビューしたい。

### 受け入れ基準

2.1 The システムは、ページ全体のフォントファミリーを `ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace` に設定するものとする

2.2 The システムは、コードブロックのフォントファミリーも同じモノスペースフォントを使用するものとする

## 3. サイドバー（ファイルリスト）- ダークテーマ

**目的**: ユーザーとして、サイドバーもダークテーマに統一したい。それにより、UI全体の一貫性が保たれる。

### 受け入れ基準

3.1 While ダークテーマが選択されている間, the システムはサイドバーの背景色を `#161b22` で表示するものとする

3.2 While ダークテーマが選択されている間, the システムはサイドバーのテキスト色を `#e6edf3` で表示するものとする

3.3 While ダークテーマが選択されている間, the システムはサイドバーの見出し色を `#e6edf3` で表示するものとする

3.4 When ダークテーマでファイルをホバーした場合, the システムは背景色を `#21262d` に変更するものとする

3.5 When ダークテーマでファイルが選択状態の場合, the システムは背景色を `#1f6feb` に、テキスト色を `#ffffff` に変更するものとする

3.6 While ダークテーマが選択されている間, the システムはサイドバーとコンテンツエリアの境界線を `#30363d` で表示するものとする

## 4. シンタックスハイライト配色

**目的**: ユーザーとして、コードブロックのシンタックスハイライトもテーマに対応させたい。それにより、コードの視認性が向上する。

### 受け入れ基準

4.1 While ダークテーマが選択されている間, the システムはhighlight.jsのCDNテーマ（github-dark.min.css）を使用してシンタックスハイライトを行うものとする

## 5. スクロールバー

**目的**: ユーザーとして、スクロールバーもテーマに対応させたい。それにより、UIの統一感が得られる。

### 受け入れ基準

5.1 The システムは、スクロールバーの幅を `4px` に設定するものとする

5.2 While ダークテーマが選択されている間, the システムはスクロールバーのトラック背景色を `#333` に設定するものとする

5.3 While ダークテーマが選択されている間, the システムはスクロールバーのサム色を `#555` に設定するものとする

## 6. マークダウンコンテンツエリア

**目的**: ユーザーとして、マークダウンコンテンツエリアもテーマに統一して表示したい。

### 受け入れ基準

6.1 The システムは、markdown-body要素の最大幅を `980px` に設定するものとする

6.2 The システムは、markdown-body要素のパディングを `45px`（デスクトップ）、`15px`（モバイル）に設定するものとする

6.3 While ダークテーマが選択されている間, the システムはmarkdown-body要素の背景をページ背景と同色（`#0d1117`）にするものとする

6.4 The システムは、markdown-body要素のボーダーを削除するものとする

## 7. ライトテーマ配色

**目的**: ユーザーとして、ライトテーマでマークダウンをプレビューしたい。それにより、明るい環境でも視認性の高いプレビューが得られる。

### 受け入れ基準

7.1 While ライトテーマが選択されている間, the システムはページ全体の背景色を `#ffffff` で表示するものとする

7.2 While ライトテーマが選択されている間, the システムは本文テキスト色を `#1f2328` で表示するものとする

7.3 While ライトテーマが選択されている間, the システムはコードブロックの背景色を `#f6f8fa` で表示するものとする

7.4 While ライトテーマが選択されている間, the システムはボーダー色を `#d0d7de` で表示するものとする

7.5 While ライトテーマが選択されている間, the システムはbody要素に `data-theme="light"` 属性を設定するものとする

## 8. テーマ切替

**目的**: ユーザーとして、ライトテーマとダークテーマを切り替えたい。それにより、環境や好みに応じたプレビューが得られる。

### 受け入れ基準

8.1 The システムは、コンテンツエリアの右上にテーマ切替ボタンを表示するものとする（コンテンツと共にスクロールし、固定配置ではない）

8.2 When テーマ切替ボタンがクリックされた場合, the システムは現在のテーマを反対のテーマに切り替えるものとする

8.3 When テーマが切り替えられた場合, the システムは設定をCookie（キー: `md-open-theme`）に保存するものとする

8.4 When ページが読み込まれた場合, the システムはCookieからテーマ設定を復元するものとする

8.5 If Cookieにテーマ設定が存在しない場合, the システムはOSのprefers-color-scheme設定に基づいてテーマを決定するものとする

8.6 While ダークテーマが選択されている間, the テーマ切替ボタンは太陽アイコンを表示し、ライトテーマが選択されている間は月アイコンを表示するものとする

## 9. サイドバー（ファイルリスト）- ライトテーマ

**目的**: ユーザーとして、ライトテーマでもサイドバーが統一されたデザインで表示されたい。

### 受け入れ基準

9.1 While ライトテーマが選択されている間, the システムはサイドバーの背景色を `#f6f8fa` で表示するものとする

9.2 While ライトテーマが選択されている間, the システムはサイドバーのテキスト色を `#1f2328` で表示するものとする

9.3 While ライトテーマが選択されている間, the システムはサイドバーの見出し色を `#1f2328` で表示するものとする

9.4 When ライトテーマでファイルをホバーした場合, the システムは背景色を `#eaeef2` に変更するものとする

9.5 When ライトテーマでファイルが選択状態の場合, the システムは背景色を `#0969da` に、テキスト色を `#ffffff` に変更するものとする

9.6 While ライトテーマが選択されている間, the システムはサイドバーとコンテンツエリアの境界線を `#d0d7de` で表示するものとする

## 10. スクロールバー - ライトテーマ

**目的**: ユーザーとして、ライトテーマでもスクロールバーが統一されたデザインで表示されたい。

### 受け入れ基準

10.1 The システムは、スクロールバーの幅を `4px` に設定するものとする（テーマ共通）

10.2 While ライトテーマが選択されている間, the システムはスクロールバーのトラック背景色を `#f0f0f0` に設定するものとする

10.3 While ライトテーマが選択されている間, the システムはスクロールバーのサム色を `#c0c0c0` に設定するものとする

## 11. マークダウンコンテンツエリア - ライトテーマ

**目的**: ユーザーとして、ライトテーマでもマークダウンコンテンツエリアが統一されたデザインで表示されたい。

### 受け入れ基準

11.1 While ライトテーマが選択されている間, the システムはmarkdown-body要素の背景をページ背景と同色（`#ffffff`）にするものとする

## 12. シンタックスハイライト - ライトテーマ

**目的**: ユーザーとして、ライトテーマでもコードブロックのシンタックスハイライトが適切に表示されたい。

### 受け入れ基準

12.1 While ライトテーマが選択されている間, the システムはhighlight.jsのCDNテーマ（github.min.css）を使用してシンタックスハイライトを行うものとする

12.2 While ライトテーマが選択されている間, the システムはgithub-markdown-cssのライト版（github-markdown-light.min.css）を読み込むものとする

## 13. tmuxパネルのテーマ対応

**目的**: ユーザーとして、tmuxパネル（ttyd含む）もテーマに統一されたデザインで表示されたい。

### 受け入れ基準

13.1 While テーマが切り替えられた場合, the システムはtmuxパネルのスタイルをCSS変数経由で現在のテーマに追従させるものとする

13.2 While テーマが切り替えられた場合, the ttyd iframeが存在する場合はテーマパラメータを更新してiframeを再読込するものとする

13.3 While ライトテーマが選択されている間, the ttydのテーマカラーは `{ background: '#ffffff', foreground: '#1f2328' }` とするものとする
